(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3ea4a1c"],{"52da":function(t,e,o){"use strict";o("5967")},5967:function(t,e,o){},cc48:function(t,e,o){"use strict";o.d(e,"a",(function(){return l})),o.d(e,"g",(function(){return a})),o.d(e,"e",(function(){return r})),o.d(e,"c",(function(){return n})),o.d(e,"d",(function(){return s})),o.d(e,"f",(function(){return c}));var i=o("b775");function l(t){return Object(i["b"])("/hotpoint/selectAllByPaging",t)}function a(t){return Object(i["b"])("/hotpoint/statusUpdate",t)}function r(t){return Object(i["b"])("/hotpoint/saveOrUpdate",t)}function n(t){return Object(i["b"])("/hotpoint/detail",t)}function s(){return Object(i["b"])("/threshold/query")}function c(t){return Object(i["b"])("/threshold/saveOrUpdate",t)}},fc91:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",[o("el-button",{staticClass:"back-link",attrs:{type:"text"},on:{click:t.back}},[t._v("热点管理")]),t._v(" / "),o("span",[t._v(t._s(t.hotPoint.hotPointName))])],1),o("hr"),o("div",[o("h3",[t._v(t._s(t.hotPoint.hotPointName))])]),o("el-form",{ref:"hotForm",attrs:{"label-suffix":"：","label-position":"top",model:t.hotForm,rules:t.hotFormRules}},[o("div",{staticClass:"detail-card"},[o("el-descriptions",{staticClass:"margin-top",attrs:{colon:!1,title:"基本信息 ",column:9}},[o("el-descriptions-item",{attrs:{span:2}},[o("el-form-item",{attrs:{label:"热点ID","label-width":"auto"}},[o("span",[t._v(t._s(t.hotPoint.hotPointId||""))])])],1),o("el-descriptions-item",{attrs:{span:2}},[o("el-form-item",{attrs:{label:"名称",prop:"hotPointName","label-width":"auto"}},[o("el-input",{attrs:{maxlength:"20 ",autocomplete:"off "},model:{value:t.hotForm.hotPointName,callback:function(e){t.$set(t.hotForm,"hotPointName",e)},expression:"hotForm.hotPointName "}})],1)],1),o("el-descriptions-item",[o("el-form-item",{attrs:{label:"类型",prop:"hotPointType",required:""}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择活动区域"},model:{value:t.hotForm.hotPointType,callback:function(e){t.$set(t.hotForm,"hotPointType",e)},expression:"hotForm.hotPointType "}},[o("el-option",{attrs:{label:"景点介绍",value:1}})],1)],1)],1),o("el-descriptions-item",[o("el-form-item",{attrs:{label:"是否关联模型",prop:"hotPointType",required:""}},[o("el-select",{staticStyle:{width:"100%"},model:{value:t.hotForm.isReleation,callback:function(e){t.$set(t.hotForm,"isReleation",e)},expression:"hotForm.isReleation"}},[o("el-option",{attrs:{label:"是",value:1}}),o("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),o("el-descriptions-item",{attrs:{span:2}},[o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.hotForm.isReleation,expression:"hotForm.isReleation==1"}],attrs:{label:"模型ID",prop:"releationModel",rules:{required:1==t.hotForm.isReleation,message:"请输入模型ID",trigger:["blur","change"]}}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.hotForm.releationModel,callback:function(e){t.$set(t.hotForm,"releationModel",e)},expression:"hotForm.releationModel"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.hotForm.isReleation,expression:"hotForm.isReleation==0"}],attrs:{label:"经纬度",required:""}},[o("el-row",{attrs:{gutter:20,type:"flex"}},[o("el-col",[o("el-form-item",{attrs:{prop:"lon",rules:t.lonLatRule}},[o("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"经度"},model:{value:t.hotForm.lon,callback:function(e){t.$set(t.hotForm,"lon",e)},expression:"hotForm.lon"}})],1)],1),o("el-col",[o("el-form-item",{attrs:{prop:"lat",rules:t.lonLatRule}},[o("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"纬度"},model:{value:t.hotForm.lat,callback:function(e){t.$set(t.hotForm,"lat",e)},expression:"hotForm.lat"}})],1)],1),o("el-col",[o("el-form-item",{attrs:{prop:"hight",rules:t.lonLatRule}},[o("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"高度"},model:{value:t.hotForm.hight,callback:function(e){t.$set(t.hotForm,"hight",e)},expression:"hotForm.hight"}})],1)],1)],1)],1)],1),o("el-descriptions-item",{attrs:{span:1}},[o("el-form-item",{attrs:{label:"是否隐藏",prop:"hotPointType"}},[o("el-select",{staticStyle:{width:"100%"},model:{value:t.hotForm.status,callback:function(e){t.$set(t.hotForm,"status",e)},expression:"hotForm.status"}},[o("el-option",{attrs:{label:"显示",value:1}}),o("el-option",{attrs:{label:"隐藏",value:2}})],1)],1)],1)],1)],1),o("div",{staticClass:"detail-card "},[o("el-descriptions",{staticClass:"margin-top",attrs:{title:"详细信息 ",colon:!1,column:5}},[o("el-descriptions-item",{attrs:{span:4,label:"历史信息:",labelStyle:{color:"#606266",fontWeight:"700"}}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"hotPointDesc"}},[o("el-input",{attrs:{type:"textarea",row:"4",autocomplete:"off"},model:{value:t.hotForm.hotPointDesc,callback:function(e){t.$set(t.hotForm,"hotPointDesc",e)},expression:"hotForm.hotPointDesc"}})],1)],1),o("el-descriptions-item",{attrs:{span:1}}),o("el-descriptions-item",{attrs:{span:4,label:" 经典照片:",labelStyle:{color:"#606266",fontWeight:"700"}}},[o("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"hotPointDesc "}},[o("el-upload",{attrs:{"file-list":t.fileList,action:t.host+"/file/upload","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.uploadSuccess}},[o("i",{staticClass:"el-icon-plus"})]),o("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1),o("el-descriptions-item",{attrs:{span:1}})],1),o("div"),o("div")],1)]),o("el-button",{on:{click:t.back}},[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")])],1)},l=[],a=(o("d81d"),o("ac1f"),o("5319"),o("cc48")),r="http://39.96.17.40:8347",n={data:function(){var t=this,e=function(e,o,i){o&&0==t.hotForm.isReleation?t.hotForm.lat?i():i(new Error("请输入经纬度")):i()};return{id:0,hotPoint:{},hotForm:{hotPointName:"",hotPointType:1,releationModel:"",hasModel:1,height:void 0,lat:void 0,lon:void 0,status:1,hotPointDesc:""},hotFormRules:{hotPointName:[{required:!0,message:"请输入热点名称",trigger:["blur","change"]}],lon:[{required:!0,message:"请输入经纬度度",trigger:"blur"},{required:!0,trigger:"blur",validator:e}]},dialogImageUrl:"",dialogVisible:!1,fileList:[],host:r}},computed:{lonLatRule:function(){return{required:0==this.hotForm.isReleation,message:"请填写完整的经纬度",trigger:["blur","change"]}}},created:function(){this.id=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var t=this;Object(a["c"])({id:this.id}).then((function(e){t.hotPoint=e.data,t.fileList=e.data.hotPointPictureList.map((function(t,e){return{name:"图片"+e,url:t}})),t.hotForm=JSON.parse(JSON.stringify(e.data))}))},handleRemove:function(t,e){this.fileList=e},uploadSuccess:function(t,e,o){o[o.length-1].url=t.data,this.fileList=o},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},back:function(){this.$router.push({name:"hotspot"})},handleSubmit:function(){var t=this;this.$refs.hotForm.validate((function(e){e&&(t.hotForm.hotPointPictureList=t.fileList.map((function(t){return t.url})),Object(a["e"])(t.hotForm).then((function(e){t.$message.success("操作成功"),t.$store.dispatch("tagsView/delCachedView","hotspot").then((function(){t.$nextTick((function(){t.$router.replace({path:"/redirect/content/hotspot"})}))}))})))}))}}},s=n,c=(o("52da"),o("2877")),u=Object(c["a"])(s,i,l,!1,null,"3622ce62",null);e["default"]=u.exports}}]);